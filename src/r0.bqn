# BQN runtime part 0. Requires:
#   Fill _fillBy_
#   +-Ã—âŒŠ=â‰¤â‰¢â¥ŠâŠ‘â†•âŒœâŠ˜
# Provides:
#   âŒŠâŒˆ|<>â‰ â‰¥âŠ¢âŠ£âˆ¾â‹ˆâ†‘â†“âŠË™ËœÂ´âˆ˜â—‹âŠ¸âŸœâ—¶âŸ
#   ^^^^^^^  ^^^^^  ^    ^^ are limited, suitable for r1

âŠ¢ â† {ğ•©}
âŠ£ â† {ğ•©}âŠ˜{ğ•¨}
Ë™ â† {ğ•©â‹„ğ•—}
Ëœ â† {ğ•©ğ”½ğ•¨âŠ£ğ•©}
âˆ˜ â† {ğ”½ğ•¨ğ”¾ğ•©}
â—‹ â† {(ğ”¾ğ•¨)ğ”½ğ”¾ğ•©}
âŠ¸ â† {(ğ”½ğ•¨âŠ£ğ•©)ğ”¾ğ•©}
âŸœ â† {(ğ•¨âŠ£ğ•©)ğ”½ğ”¾ğ•©}
â—¶ â† {ğ•¨((ğ•¨ğ”½ğ•©)âŠ‘ğ•˜){ğ”½}ğ•©}     # LIMITED to number left operand result
âŸ â† {ğ•¨((ğ•¨ğ”¾ğ•©)âŠ‘âŠ¢â€¿ğ•—){ğ”½}ğ•©}   # LIMITED to boolean right operand result

Box â† {ğ•©FillâŸ¨âŸ©â¥ŠâŸ¨ğ•©âŸ©}
# LIMITED to numeric arguments for arithmetic cases
â‰¥ â†            â‰¤Ëœ
< â† Box      âŠ˜ (1-â‰¥)
> â†            (1-â‰¤)
âŒŠ â†© âŒŠ        âŠ˜ (âŠ£-â‰¥Ã—-)
âŒˆ â† -âˆ˜âŒŠâˆ˜-    âŠ˜ (âŠ£-â‰¤Ã—-)
| â† 0âŠ¸â‰¤â—¶-â€¿âŠ¢
â‰  â† (0<=)â—¶âŸ¨1â‹„0âŠ‘â‰¢âŸ©  # LIMITED to monadic case

â‹ˆ â† {âŸ¨ğ•©âŸ©} âŠ˜ {âŸ¨ğ•¨,ğ•©âŸ©}                # LIMITED by not having a result fill
âˆ¾ â† {kâ†â‰ ğ•¨â‹„kâŠ¸â‰¤â—¶âŸ¨âŠ‘âŸœğ•¨â‹„-âŸœkâŠ‘ğ•©ËœâŸ©âŒœâ†•k+â‰ ğ•©}  # LIMITED to two list arguments
â†‘ â† {âŠ‘âŸœğ•©âŒœâ†•ğ•¨}                       # LIMITED to number ğ•¨ and list ğ•©
â†“ â† {(ğ•¨âŠ¸+âŠ‘ğ•©Ë™)âŒœâ†•(â‰ ğ•©)-ğ•¨}             # LIMITED to number ğ•¨ and list ğ•©

Â¨ â† { dâ†â¥Šğ•©â‹„(â‰¢ğ•©)â¥Š(âŠ‘âŸœ(â¥Šğ•¨)ğ”½âŠ‘âŸœd)âŒœâ†•â‰ d } # LIMITED to equal-shape arrays

_fold0â†{
  lâ†â‰ ğ•© â‹„ Fâ†ğ”½
  râ†ğ•¨ {lâ†©l-1â‹„lâŠ‘ğ•©}âŠ˜âŠ£ ğ•©
  ({râ†©ğ•© F r}(l-1)âŠ¸-âŠ‘ğ•©Ë™)âŒœâ†•l
  r
}
Â´ â† _fold0    # LIMITED to nonempty list ğ•©, or ğ•¨ and list ğ•©

GetCellsâ†(1==âˆ˜âŠ¢)â—¶{
  câ†1Ã—Â´sâ†1â†“â‰¢ğ•©
  (câŠ¸Ã—âŒœğ•¨)(+âŠ‘(â¥Šğ•©)Ë™)âŒœsâ¥Šâ†•c
}â€¿{
  âŠ‘âŸœğ•©âŒœğ•¨
} _fillBy_ âŠ¢
âŠ â† GetCells  # LIMITED to depth-1 natural number left argument
