# BQN runtime hosted in BQN

âŸ¨src,needâŸ© â† â€¢Import "src/pr.bqn"
compile â† need â€¢Import "src/c.bqn"
glyphs â† âˆ¾ â€¢Import "src/glyphs.bqn"
vm â† â€¢Import "vm.bqn"

FillFn â† (âŠ‘1â†‘0â†‘â¥Š)âŠ˜{ğ•©Ë™âŒ¾âŠ¢ <ğ•¨}
_fillBy_ â† {
  râ†ğ•¨ğ”½xâ†ğ•© â‹„ Gâ†ğ”¾
  ğ•¨({
    _f â† {(3âŒŠâ€¢Type)â—¶âŸ¨ğ”½,0,' ',âŠ¢âŸ©}
    (FillFnâŠ(!Ë™)_f ğ•¨) G FillFn _f x
  }FillFnâŠ¢)âŠâŠ¢âŸ(0=â€¢Typeâˆ˜âŠ¢) r
}
GroupLen â† {(ğ•¨âŒˆâ‰ )âŠ¸â†‘0 FillFnâ‰ Â¨âŠ”ğ•©}
extra â† âŸ¨ â€¢Type, FillFn, â‹†â¼, GroupLen, âˆ¾âŠ”âˆ˜âŠ¢, _fillBy_ âŸ©
provide â† { gâ†ğ•©âˆŠglyphs â‹„ (â‹â‹g)âŠextraâˆ¾â€¢BQNâˆ˜â¥ŠÂ¨g/ğ•© } âˆ¾need

rtâ€¿SetPrimsâ€¿SetInv â† VM âŸ¨provide,!âˆ˜0Â¨âŸ© Compile src
PrimInd â† rtâŠ¸âŠâŒ¾<
Decompose â† ((â‰ glyphs)>PrimInd)â—¶âŸ¨â€¢Decompose,0âŠ¸â‰âŸ©
SetPrims âŸ¨ Decompose, PrimInd âŸ©

rt
