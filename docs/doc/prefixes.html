<head>
  <meta charset="utf-8">
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="../style.css" rel="stylesheet"/>
  <title>BQN: Prefixes and Suffixes</title>
</head>
<div class="nav">(<a href="https://github.com/mlochbaum/BQN">github</a>) / <a href="../index.html">BQN</a> / <a href="index.html">doc</a></div>
<h1 id="prefixes-and-suffixes"><a class="header" href="#prefixes-and-suffixes">Prefixes and Suffixes</a></h1>
<p>The Prefixes (<code><span class='Function'>â†‘</span></code>) function gives a list of all prefixes of its argument array along the <a href="leading.html">first axis</a>, and Suffixes (<code><span class='Function'>â†“</span></code>) gives a similar list for suffixes. Because the result can be much larger than the argument, these functions may not be used often in high-performance code, but they are a good conceptual tool and can make sense for algorithms that are inherently quadratic.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oaRICJhYmNkZSIKCuKGkyAiYWJjZGUi">â†—ï¸</a><pre>    <span class='Function'>â†‘</span> <span class='String'>&quot;abcde&quot;</span>
âŸ¨ âŸ¨âŸ© "a" "ab" "abc" "abcd" "abcde" âŸ©

    <span class='Function'>â†“</span> <span class='String'>&quot;abcde&quot;</span>
âŸ¨ "abcde" "bcde" "cde" "de" "e" âŸ¨âŸ© âŸ©
</pre>
<p>The functions are closely related to <a href="take.html">Take and Drop</a>, as we might expect from their glyphs. Element <code><span class='Value'>i</span><span class='Function'>âŠ‘â†‘</span><span class='Value'>ğ•©</span></code> is <code><span class='Value'>i</span><span class='Function'>â†‘</span><span class='Value'>ğ•©</span></code>, and <code><span class='Value'>i</span><span class='Function'>âŠ‘â†“</span><span class='Value'>ğ•©</span></code> is <code><span class='Value'>i</span><span class='Function'>â†“</span><span class='Value'>ğ•©</span></code>.</p>
<p>In both cases, an empty array and the entire argument are included in the result, meaning its length is one more than that of the argument. Using <a href="logic.html">Span</a>, we can say that the result has elements whose <a href="shape.html">lengths</a> go from <code><span class='Number'>0</span></code> to <code><span class='Function'>â‰ </span><span class='Value'>ğ•©</span></code>, inclusive, so there are <code><span class='Paren'>(</span><span class='Function'>â‰ </span><span class='Value'>ğ•©</span><span class='Paren'>)</span><span class='Function'>Â¬</span><span class='Number'>0</span></code> or <code><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Value'>ğ•©</span></code> elements. The total number of cells in the result (for example, <code><span class='Function'>â‰ âˆ¾â†‘</span><span class='Value'>ğ•©</span></code> or <code><span class='Function'>+</span><span class='Modifier'>Â´</span><span class='Function'>â‰ </span><span class='Modifier'>Â¨</span><span class='Function'>â†‘</span><span class='Value'>ğ•©</span></code>) scales with the square of the argument lengthâ€”it's quadratic in <code><span class='Function'>â‰ </span><span class='Value'>ğ•©</span></code>. We can find the exact total by looking at Prefixes and Suffixes together:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KOKGkSDiiY3LmCDihpMpICJhYmNkZSIKCijihpEg4oi+wqgg4oaTKSAiYWJjZGUi">â†—ï¸</a><pre>    <span class='Paren'>(</span><span class='Function'>â†‘</span> <span class='Function'>â‰</span><span class='Modifier'>Ë˜</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='String'>&quot;abcde&quot;</span>
â”Œâ”€                 
â•µ âŸ¨âŸ©      "abcde"  
  "a"     "bcde"   
  "ab"    "cde"    
  "abc"   "de"     
  "abcd"  "e"      
  "abcde" âŸ¨âŸ©       
                  â”˜

    <span class='Paren'>(</span><span class='Function'>â†‘</span> <span class='Function'>âˆ¾</span><span class='Modifier'>Â¨</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='String'>&quot;abcde&quot;</span>
âŸ¨ "abcde" "abcde" "abcde" "abcde" "abcde" "abcde" âŸ©
</pre>
<p>Joining corresponding elements of <code><span class='Function'>â†‘</span><span class='Value'>ğ•©</span></code> and <code><span class='Function'>â†“</span><span class='Value'>ğ•©</span></code> gives <code><span class='Value'>ğ•©</span></code> again. This is because <code><span class='Value'>i</span><span class='Function'>âŠ‘</span><span class='Paren'>(</span><span class='Function'>â†‘âˆ¾</span><span class='Modifier'>Â¨</span><span class='Function'>â†“</span><span class='Paren'>)</span><span class='Value'>ğ•©</span></code> is <code><span class='Paren'>(</span><span class='Value'>i</span><span class='Function'>âŠ‘â†‘</span><span class='Value'>ğ•©</span><span class='Paren'>)</span><span class='Function'>âˆ¾</span><span class='Paren'>(</span><span class='Value'>i</span><span class='Function'>âŠ‘â†“</span><span class='Value'>ğ•©</span><span class='Paren'>)</span></code>, or, using the Take and Drop correspondences, <code><span class='Paren'>(</span><span class='Value'>i</span><span class='Function'>â†‘</span><span class='Value'>ğ•©</span><span class='Paren'>)</span><span class='Function'>âˆ¾</span><span class='Paren'>(</span><span class='Value'>i</span><span class='Function'>â†“</span><span class='Value'>ğ•©</span><span class='Paren'>)</span></code>, which is <code><span class='Value'>ğ•©</span></code>. Element-wise, we are combining the first <code><span class='Value'>i</span></code> cells of <code><span class='Value'>ğ•©</span></code> with all but the first <code><span class='Value'>i</span></code>.</p>
<p>Looking at the entire result, we now know that <code><span class='Paren'>(</span><span class='Function'>â†‘âˆ¾</span><span class='Modifier'>Â¨</span><span class='Function'>â†“</span><span class='Paren'>)</span><span class='Value'>ğ•©</span></code> is <code><span class='Paren'>(</span><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Value'>ğ•©</span><span class='Paren'>)</span><span class='Function'>â¥Š&lt;</span><span class='Value'>ğ•©</span></code>. The total number of cells in this combined array is therefore <code><span class='Paren'>(</span><span class='Number'>1</span><span class='Function'>+</span><span class='Value'>n</span><span class='Paren'>)</span><span class='Function'>Ã—</span><span class='Value'>n</span></code>, setting <code><span class='Value'>n</span><span class='Gets'>â†</span><span class='Function'>â‰ </span><span class='Value'>ğ•©</span></code>. Each of Prefixes and Suffixes must have the same total number of cells (in code, <code><span class='Function'>â†‘</span><span class='Value'>ğ•©</span></code> is <code><span class='Function'>âŒ½</span><span class='Modifier'>Â¨</span><span class='Modifier2'>âˆ˜</span><span class='Function'>â†“</span><span class='Modifier2'>âŒ¾</span><span class='Function'>âŒ½</span><span class='Value'>ğ•©</span></code>, and Reverse doesn't change an array's shape). So the total number in either one is <code><span class='Number'>2</span><span class='Function'>Ã·</span><span class='Modifier'>Ëœ</span><span class='Value'>n</span><span class='Function'>Ã—</span><span class='Number'>1</span><span class='Function'>+</span><span class='Value'>n</span></code>.</p>
<h2 id="definition"><a class="header" href="#definition">Definition</a></h2>
<p>Knowing the length and the elements, it's easy to define functions for Prefixes and Suffixes: <code><span class='Function'>â†‘</span></code> is equivalent to <code><span class='Paren'>(</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Paren'>)</span><span class='Function'>â†‘</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span></code> while <code><span class='Function'>â†“</span></code> is <code><span class='Paren'>(</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Paren'>)</span><span class='Function'>â†“</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span></code>. Each primitive is defined only on arrays with at least one axis.</p>
<h2 id="working-with-pairs"><a class="header" href="#working-with-pairs">Working with pairs</a></h2>
<p>Sometimes it's useful to apply an operation to every unordered pair of elements from a list. For example, consider all possible products of numbers between 1 and 6:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=w5fijJzLnCAxK+KGlTY=">â†—ï¸</a><pre>    <span class='Function'>Ã—</span><span class='Modifier'>âŒœËœ</span> <span class='Number'>1</span><span class='Function'>+â†•</span><span class='Number'>6</span>
â”Œâ”€                  
â•µ 1  2  3  4  5  6  
  2  4  6  8 10 12  
  3  6  9 12 15 18  
  4  8 12 16 20 24  
  5 10 15 20 25 30  
  6 12 18 24 30 36  
                   â”˜
</pre>
<p>It's easy enough to use the <a href="map.html#table">Table</a> modifier here, but it also computes most products twice. If we only care about the unique products, we could multiply each number by all the ones after it. &quot;After&quot; sounds like suffixes, so let's look at those:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MSvihpU2CgrihpMgMSvihpU2">â†—ï¸</a><pre>    <span class='Number'>1</span><span class='Function'>+â†•</span><span class='Number'>6</span>
âŸ¨ 1 2 3 4 5 6 âŸ©

    <span class='Function'>â†“</span> <span class='Number'>1</span><span class='Function'>+â†•</span><span class='Number'>6</span>
âŸ¨ âŸ¨ 1 2 3 4 5 6 âŸ© âŸ¨ 2 3 4 5 6 âŸ© âŸ¨ 3 4 5 6 âŸ© âŸ¨ 4 5 6 âŸ© âŸ¨ 5 6 âŸ© âŸ¨ 6 âŸ© âŸ¨âŸ© âŸ©
</pre>
<p>We want to include the diagonal, so we'll pair each element with the corresponding element of the suffixes, reducing the suffixes to the original array's length by dropping the last element, which is empty. In other cases, we might not want to include it and we should instead drop the first element.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KOKKoiDDlyDiiaAg4oaRIOKGkykgMSvihpU2Cgoo4oqiIMOXIDEg4oaTIOKGkykgMSvihpU2">â†—ï¸</a><pre>    <span class='Paren'>(</span><span class='Function'>âŠ¢</span> <span class='Function'>Ã—</span> <span class='Function'>â‰ </span> <span class='Function'>â†‘</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='Number'>1</span><span class='Function'>+â†•</span><span class='Number'>6</span>
âŸ¨ âŸ¨ 1 2 3 4 5 6 âŸ© âŸ¨ 4 6 8 10 12 âŸ© âŸ¨ 9 12 15 18 âŸ© âŸ¨ 16 20 24 âŸ© âŸ¨ 25 30 âŸ© âŸ¨ 36 âŸ© âŸ©

    <span class='Paren'>(</span><span class='Function'>âŠ¢</span> <span class='Function'>Ã—</span> <span class='Number'>1</span> <span class='Function'>â†“</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='Number'>1</span><span class='Function'>+â†•</span><span class='Number'>6</span>
âŸ¨ âŸ¨ 2 3 4 5 6 âŸ© âŸ¨ 6 8 10 12 âŸ© âŸ¨ 12 15 18 âŸ© âŸ¨ 20 24 âŸ© âŸ¨ 30 âŸ© âŸ¨âŸ© âŸ©
</pre>
<p>By using <a href="pair.html">Pair</a> (<code><span class='Function'>â‹ˆ</span></code>) instead of <code><span class='Function'>Ã—</span></code>, we can see the argument ordering, demonstrating that we are looking at the upper right half of the matrix produced by Table. While in this case we could use <code><span class='Function'>â‹ˆ</span><span class='Modifier2'>âš‡</span><span class='Number'>0</span></code> to mimic the pervasion of <code><span class='Function'>Ã—</span></code>, we'd like this to work even on nested arguments so we should figure out how the mapping structure works to apply Each appropriately.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4ouI4oycy5wgImFiYyIKCig8y5gg4ouIwqjCqCDiiaAg4oaRIOKGkykgImFiYyI=">â†—ï¸</a><pre>    <span class='Function'>â‹ˆ</span><span class='Modifier'>âŒœËœ</span> <span class='String'>&quot;abc&quot;</span>
â”Œâ”€                
â•µ "aa" "ab" "ac"  
  "ba" "bb" "bc"  
  "ca" "cb" "cc"  
                 â”˜

    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier'>Ë˜</span> <span class='Function'>â‹ˆ</span><span class='Modifier'>Â¨Â¨</span> <span class='Function'>â‰ </span> <span class='Function'>â†‘</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>
âŸ¨ âŸ¨ "aa" "ab" "ac" âŸ© âŸ¨ "bb" "bc" âŸ© âŸ¨ "cc" âŸ© âŸ©
</pre>
<p>As before, we can exclude the diagonal, and using Prefixes instead of Suffixes gives us the lower left half instead of the upper rightâ€”in terms of the arguments given to <code><span class='Function'>â‹ˆ</span></code> it reverses the argument pairs and iterates in a different order.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KDzLmCDii4jCqMKoIDEg4oaTIOKGkykgImFiYyIKCig8y5gg4ouIwqjCqCAxIOKGkyDihpEpICJhYmMiCgooPMuYIOKLiMKowqgg4omgIOKGkSDihpEpICJhYmMi">â†—ï¸</a><pre>    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier'>Ë˜</span> <span class='Function'>â‹ˆ</span><span class='Modifier'>Â¨Â¨</span> <span class='Number'>1</span> <span class='Function'>â†“</span> <span class='Function'>â†“</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>
âŸ¨ âŸ¨ "ab" "ac" âŸ© âŸ¨ "bc" âŸ© âŸ¨âŸ© âŸ©

    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier'>Ë˜</span> <span class='Function'>â‹ˆ</span><span class='Modifier'>Â¨Â¨</span> <span class='Number'>1</span> <span class='Function'>â†“</span> <span class='Function'>â†‘</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>
âŸ¨ âŸ¨ "aa" âŸ© âŸ¨ "ba" "bb" âŸ© âŸ¨ "ca" "cb" "cc" âŸ© âŸ©

    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier'>Ë˜</span> <span class='Function'>â‹ˆ</span><span class='Modifier'>Â¨Â¨</span> <span class='Function'>â‰ </span> <span class='Function'>â†‘</span> <span class='Function'>â†‘</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>
âŸ¨ âŸ¨âŸ© âŸ¨ "ba" âŸ© âŸ¨ "ca" "cb" âŸ© âŸ©
</pre>
<h2 id="slices"><a class="header" href="#slices">Slices</a></h2>
<p>Prefixes and Suffixes give certain restricted slices of the argument array, where a slice is a contiguous selection of major cells. If we want all slices along the first axis, we can take the suffixes of each prefix, or vice-versa:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oaTwqjihpEgImFiYyIKCuKGkcKo4oaTICJhYmMi">â†—ï¸</a><pre>    <span class='Function'>â†“</span><span class='Modifier'>Â¨</span><span class='Function'>â†‘</span> <span class='String'>&quot;abc&quot;</span>
â”Œâ”€                                                         
Â· âŸ¨ âŸ¨âŸ© âŸ© âŸ¨ "a" âŸ¨âŸ© âŸ© âŸ¨ "ab" "b" âŸ¨âŸ© âŸ© âŸ¨ "abc" "bc" "c" âŸ¨âŸ© âŸ©  
                                                          â”˜

    <span class='Function'>â†‘</span><span class='Modifier'>Â¨</span><span class='Function'>â†“</span> <span class='String'>&quot;abc&quot;</span>
â”Œâ”€                                                         
Â· âŸ¨ âŸ¨âŸ© "a" "ab" "abc" âŸ© âŸ¨ âŸ¨âŸ© "b" "bc" âŸ© âŸ¨ âŸ¨âŸ© "c" âŸ© âŸ¨ âŸ¨âŸ© âŸ©  
                                                          â”˜
</pre>
<p>Effectively, this parametrizes the slices either by ending then starting index, or by starting index then length. Four empty slices are included because in a list of length 3 there are 4 places an empty slice can start: all the spaces between or outside elements (these also correspond to all the possible positions for the result of <a href="order.html#bins">Bins</a>). The slices can also be parametrized by length and then starting index using <a href="windows.html">Windows</a>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KCjihpUxK+KJoCnihpXCqDwpICJhYmMiCgooKOKGlTEr4omgKTzLmOKImOKGlcKoPCkgImFiYyIgICMgU3BsaXQgdGhlbSB0byBtYXRjaCBQcmVmaXhlcy9TdWZmaXhlcw==">â†—ï¸</a><pre>    <span class='Paren'>((</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Paren'>)</span><span class='Function'>â†•</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>
â”Œâ”€                         
Â· â”Œâ” â”Œâ”€    â”Œâ”€     â”Œâ”€       
  â•µ  â•µ"a   â•µ"ab   â•µ"abc"   
       b     bc"        â”˜  
       c"       â”˜          
         â”˜                 
   â”˜                       
                          â”˜

    <span class='Paren'>((</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰ </span><span class='Paren'>)</span><span class='Function'>&lt;</span><span class='Modifier'>Ë˜</span><span class='Modifier2'>âˆ˜</span><span class='Function'>â†•</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span><span class='Paren'>)</span> <span class='String'>&quot;abc&quot;</span>  <span class='Comment'># Split them to match Prefixes/Suffixes
</span>â”Œâ”€                                                         
Â· âŸ¨ âŸ¨âŸ© âŸ¨âŸ© âŸ¨âŸ© âŸ¨âŸ© âŸ© âŸ¨ "a" "b" "c" âŸ© âŸ¨ "ab" "bc" âŸ© âŸ¨ "abc" âŸ©  
                                                          â”˜
</pre>
<p>We might view a slice as a selection for not two but <em>three</em> parameters: the number of cells before, in, and after the slice. The conditions are that each parameter, being a length, is at least 0, and the total of the three parameters is equal to the array length. With three parameters and one equality constraint, the space of slices is two-dimensional; the above ways to enumerate it each pick two parameters and allow the third to be dependent on these two. If you're familiar with <a href="https://en.wikipedia.org/wiki/Barycentric_coordinate_system">barycentric coordinates</a> on a triangle, this should sound very familiar because that's exactly what the three parameters are!</p>
<p>We might also consider the question of slices along multiple axes. Because axes are orthogonal, we can choose such a slice by independently slicing along each axis. To use the homogeneous shape of arrays as much as possible, the result should still only have two added layers of nesting for the two coordinates we choose, with all possible choices for the first axis along the axes of the outer array and those for the second along the axes of each inner array. Our Windows-based solution adapts to multidimensional arrays easily:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KCjihpUxK+KJoik84o6JMuKImOKGlcKoPCkgM+KAvzLipYoiYWJjZGVmIg==">â†—ï¸</a><pre>    <span class='Paren'>((</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰¢</span><span class='Paren'>)</span><span class='Function'>&lt;</span><span class='Modifier2'>â‰</span><span class='Number'>2</span><span class='Modifier2'>âˆ˜</span><span class='Function'>â†•</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span><span class='Paren'>)</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Function'>â¥Š</span><span class='String'>&quot;abcdef&quot;</span>
â”Œâ”€                                         
â•µ â”Œâ”€           â”Œâ”€              â”Œâ”€          
  â•µ â”Œâ” â”Œâ” â”Œâ”   â•µ â†•0â€¿1 â†•0â€¿1     â•µ â†•0â€¿2      
    â””â”˜ â””â”˜ â””â”˜     â†•0â€¿1 â†•0â€¿1       â†•0â€¿2      
    â”Œâ” â”Œâ” â”Œâ”     â†•0â€¿1 â†•0â€¿1       â†•0â€¿2      
    â””â”˜ â””â”˜ â””â”˜     â†•0â€¿1 â†•0â€¿1       â†•0â€¿2      
    â”Œâ” â”Œâ” â”Œâ”               â”˜          â”˜    
    â””â”˜ â””â”˜ â””â”˜                               
    â”Œâ” â”Œâ” â”Œâ”                               
    â””â”˜ â””â”˜ â””â”˜                               
             â”˜                             
  â”Œâ”€           â”Œâ”€              â”Œâ”€          
  â•µ â”Œâ” â”Œâ” â”Œâ”   â•µ â”Œâ”€    â”Œâ”€      â•µ â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"a"  â•µ"b"      â•µ"ab"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
    â”Œâ” â”Œâ” â”Œâ”     â”Œâ”€    â”Œâ”€        â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"c"  â•µ"d"      â•µ"cd"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
    â”Œâ” â”Œâ” â”Œâ”     â”Œâ”€    â”Œâ”€        â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"e"  â•µ"f"      â•µ"ef"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
             â”˜               â”˜          â”˜  
  â”Œâ”€           â”Œâ”€              â”Œâ”€          
  â•µ â”Œâ” â”Œâ” â”Œâ”   â•µ â”Œâ”€    â”Œâ”€      â•µ â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"a   â•µ"b       â•µ"ab      
                   c"    d"        cd"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
    â”Œâ” â”Œâ” â”Œâ”     â”Œâ”€    â”Œâ”€        â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"c   â•µ"d       â•µ"cd      
                   e"    f"        ef"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
             â”˜               â”˜          â”˜  
  â”Œâ”€           â”Œâ”€              â”Œâ”€          
  â•µ â”Œâ” â”Œâ” â”Œâ”   â•µ â”Œâ”€    â”Œâ”€      â•µ â”Œâ”€        
    â•µ  â•µ  â•µ      â•µ"a   â•µ"b       â•µ"ab      
                   c     d         cd      
                   e"    f"        ef"     
     â”˜  â”˜  â”˜         â”˜     â”˜          â”˜    
             â”˜               â”˜          â”˜  
                                          â”˜
</pre>
<p>This array can be <a href="join.html">joined</a>, indicating that the length of each inner axis depends only on the position in the corresponding outer axis (let's also drop those empty slices to take up less space).</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oi+IDHigL8xIOKGkyAoKOKGlTEr4omiKTzijoky4oiY4oaVwqg8KSAz4oC/MuKliiJhYmNkZWYi">â†—ï¸</a><pre>    <span class='Function'>âˆ¾</span> <span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>1</span> <span class='Function'>â†“</span> <span class='Paren'>((</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰¢</span><span class='Paren'>)</span><span class='Function'>&lt;</span><span class='Modifier2'>â‰</span><span class='Number'>2</span><span class='Modifier2'>âˆ˜</span><span class='Function'>â†•</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span><span class='Paren'>)</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Function'>â¥Š</span><span class='String'>&quot;abcdef&quot;</span>
â”Œâ”€                    
â•µ â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"a"  â•µ"b"  â•µ"ab"   
      â”˜     â”˜      â”˜  
  â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"c"  â•µ"d"  â•µ"cd"   
      â”˜     â”˜      â”˜  
  â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"e"  â•µ"f"  â•µ"ef"   
      â”˜     â”˜      â”˜  
  â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"a   â•µ"b   â•µ"ab    
    c"    d"    cd"   
      â”˜     â”˜      â”˜  
  â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"c   â•µ"d   â•µ"cd    
    e"    f"    ef"   
      â”˜     â”˜      â”˜  
  â”Œâ”€    â”Œâ”€    â”Œâ”€      
  â•µ"a   â•µ"b   â•µ"ab    
    c     d     cd    
    e"    f"    ef"   
      â”˜     â”˜      â”˜  
                     â”˜
</pre>
<p>But Prefixes and Suffixes <a href="../commentary/problems.html#cant-take-prefixes-or-suffixes-on-multiple-axes">don't have</a> any way to specify that they should work on multiple axes, and always work on exactly one. So to extend this pattern we will have to define multi-dimensional versions. This turns out to be very easy: just replace Length with <a href="shape.html">Shape</a> in the <a href="#definition">definitions</a> above.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=UHJlZnMg4oaQICjihpUxK+KJoinihpHCqDwKU3VmZnMg4oaQICjihpUxK+KJoinihpPCqDwKUHJlZnPCqFN1ZmZzIDPigL8y4qWKImFiY2RlZiI=">â†—ï¸</a><pre>    <span class='Function'>Prefs</span> <span class='Gets'>â†</span> <span class='Paren'>(</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰¢</span><span class='Paren'>)</span><span class='Function'>â†‘</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span>
    <span class='Function'>Suffs</span> <span class='Gets'>â†</span> <span class='Paren'>(</span><span class='Function'>â†•</span><span class='Number'>1</span><span class='Function'>+â‰¢</span><span class='Paren'>)</span><span class='Function'>â†“</span><span class='Modifier'>Â¨</span><span class='Function'>&lt;</span>
    <span class='Function'>Prefs</span><span class='Modifier'>Â¨</span><span class='Function'>Suffs</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Function'>â¥Š</span><span class='String'>&quot;abcdef&quot;</span>
â”Œâ”€                                         
â•µ â”Œâ”€                  â”Œâ”€           â”Œâ”€      
  â•µ â”Œâ” â†•0â€¿1  â†•0â€¿2     â•µ â”Œâ” â†•0â€¿1    â•µ â”Œâ”    
    â””â”˜                  â””â”˜           â””â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"a"  â•µ"ab"      â•µ  â•µ"b"      â•µ     
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"a   â•µ"ab       â•µ  â•µ"b       â•µ     
         c"    cd"           d"            
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"a   â•µ"ab       â•µ  â•µ"b       â•µ     
         c     cd            d             
         e"    ef"           f"            
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
                    â”˜            â”˜      â”˜  
  â”Œâ”€                  â”Œâ”€           â”Œâ”€      
  â•µ â”Œâ” â†•0â€¿1  â†•0â€¿2     â•µ â”Œâ” â†•0â€¿1    â•µ â”Œâ”    
    â””â”˜                  â””â”˜           â””â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"c"  â•µ"cd"      â•µ  â•µ"d"      â•µ     
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"c   â•µ"cd       â•µ  â•µ"d       â•µ     
         e"    ef"           f"            
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
                    â”˜            â”˜      â”˜  
  â”Œâ”€                  â”Œâ”€           â”Œâ”€      
  â•µ â”Œâ” â†•0â€¿1  â†•0â€¿2     â•µ â”Œâ” â†•0â€¿1    â•µ â”Œâ”    
    â””â”˜                  â””â”˜           â””â”˜    
    â”Œâ” â”Œâ”€    â”Œâ”€         â”Œâ” â”Œâ”€        â”Œâ”    
    â•µ  â•µ"e"  â•µ"ef"      â•µ  â•µ"f"      â•µ     
     â”˜     â”˜      â”˜      â”˜     â”˜      â”˜    
                    â”˜            â”˜      â”˜  
  â”Œâ”€                  â”Œâ”€           â”Œâ”€      
  â•µ â”Œâ” â†•0â€¿1 â†•0â€¿2      â•µ â”Œâ” â†•0â€¿1    â•µ â”Œâ”    
    â””â”˜                  â””â”˜           â””â”˜    
                 â”˜              â”˜       â”˜  
                                          â”˜
</pre>
