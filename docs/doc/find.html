<head>
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="../style.css" rel="stylesheet"/>
  <title>BQN: Find</title>
</head>
<div class="nav">(<a href="https://github.com/mlochbaum/BQN">github</a>) / <a href="../index.html">BQN</a> / <a href="index.html">doc</a></div>
<h1 id="find"><a class="header" href="#find">Find</a></h1>
<p>Find (<code><span class='Function'>â·</span></code>) searches for occurrences of an array <code><span class='Value'>ğ•¨</span></code> within <code><span class='Value'>ğ•©</span></code>. The result contains a boolean for each possible location, which is 1 if <code><span class='Value'>ğ•¨</span></code> was found there and 0 if not.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=Inh4IiDijbcgInh4YmR4eHhjeCI=">â†—ï¸</a><pre>    <span class='String'>&quot;xx&quot;</span> <span class='Function'>â·</span> <span class='String'>&quot;xxbdxxxcx&quot;</span>
âŸ¨ 1 0 0 0 1 1 0 0 âŸ©
</pre>
<p>More precisely <code><span class='Value'>ğ•¨</span></code> needs to <a href="match.html">match</a> a contiguous selection from <code><span class='Value'>ğ•©</span></code>, which for strings means a substring. These subarrays of <code><span class='Value'>ğ•©</span></code> are also exactly the cells in the result of <a href="windows.html">Windows</a>. In fact we can use Windows to see all the arrays <code><span class='Value'>ğ•¨</span></code> will be compared against.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MiDihpUgInh4YmR4eHhjeCIKCiJ4eCLiirjiiaHLmCAyIOKGlSAieHhiZHh4eGN4Ig==">â†—ï¸</a><pre>    <span class='Number'>2</span> <span class='Function'>â†•</span> <span class='String'>&quot;xxbdxxxcx&quot;</span>
â”Œâ”€    
â•µ"xx  
  xb  
  bd  
  dx  
  xx  
  xx  
  xc  
  cx" 
     â”˜

    <span class='String'>&quot;xx&quot;</span><span class='Modifier2'>âŠ¸</span><span class='Function'>â‰¡</span><span class='Modifier'>Ë˜</span> <span class='Number'>2</span> <span class='Function'>â†•</span> <span class='String'>&quot;xxbdxxxcx&quot;</span>
âŸ¨ 1 0 0 0 1 1 0 0 âŸ©
</pre>
<p>Like Windows, the result usually doesn't have the same dimensions as <code><span class='Value'>ğ•©</span></code>. This is easier to see when <code><span class='Value'>ğ•¨</span></code> is longer. It differs from APL's version, which includes trailing 0s in order to maintain the same length. Bringing the size up to that of <code><span class='Value'>ğ•©</span></code> is easy enough with <a href="take.html">Take</a> (<code><span class='Function'>â†‘</span></code>), while shortening a padded result would be harder.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=InN0cmluZyIg4o23ICJzdWJzdHJpbmciCgoic3RyaW5nIiAo4omi4oiY4oqi4oaR4o23KSAic3Vic3RyaW5nIiAgIyBBUEwgc3R5bGU=">â†—ï¸</a><pre>    <span class='String'>&quot;string&quot;</span> <span class='Function'>â·</span> <span class='String'>&quot;substring&quot;</span>
âŸ¨ 0 0 0 1 âŸ©

    <span class='String'>&quot;string&quot;</span> <span class='Paren'>(</span><span class='Function'>â‰¢</span><span class='Modifier2'>âˆ˜</span><span class='Function'>âŠ¢â†‘â·</span><span class='Paren'>)</span> <span class='String'>&quot;substring&quot;</span>  <span class='Comment'># APL style
</span>âŸ¨ 0 0 0 1 0 0 0 0 0 âŸ©
</pre>
<p>If <code><span class='Value'>ğ•¨</span></code> is larger than <code><span class='Value'>ğ•©</span></code>, the result is empty, and there's no error even in cases where Windows would fail. One place this tends to come up is when applying <a href="pick.html#first">First</a> (<code><span class='Function'>âŠ‘</span></code>) the result: <code><span class='Function'>âŠ‘â·</span></code> tests whether <code><span class='Value'>ğ•¨</span></code> appears in <code><span class='Value'>ğ•©</span></code> at the first position, that is, whether it's a prefix of <code><span class='Value'>ğ•©</span></code>. If <code><span class='Value'>ğ•¨</span></code> is longer than <code><span class='Value'>ğ•©</span></code> it shouldn't be a prefix. First will fail but using a <a href="fold.html">fold</a> <code><span class='Number'>0</span><span class='Function'>âŠ£</span><span class='Modifier'>Â´</span><span class='Function'>â¥Š</span><span class='Modifier2'>âˆ˜</span><span class='Function'>â·</span></code> instead gives a 0 in this case.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=Imxvb29vb29uZyIg4o23ICJzaG9ydCIKCjkg4oaVICJzaG9ydCIKCjAg4oqjwrQgImxvb29vb29uZyIg4o23ICJzaG9ydCI=">â†—ï¸</a><pre>    <span class='String'>&quot;loooooong&quot;</span> <span class='Function'>â·</span> <span class='String'>&quot;short&quot;</span>
âŸ¨âŸ©

    <span class='Number'>9</span> <span class='Function'>â†•</span> <span class='String'>&quot;short&quot;</span>
<span class='Error'>Error: ğ•¨â†•ğ•©: Window length ğ•¨ must be at most axis length plus one</span>

    <span class='Number'>0</span> <span class='Function'>âŠ£</span><span class='Modifier'>Â´</span> <span class='String'>&quot;loooooong&quot;</span> <span class='Function'>â·</span> <span class='String'>&quot;short&quot;</span>
0
</pre>
<p>This pattern also works in the high-rank case discussed below, testing whether <code><span class='Value'>ğ•¨</span></code> is a multi-dimensional prefix starting at the lowest-index corner of <code><span class='Value'>ğ•©</span></code>.</p>
<h3 id="higher-ranks"><a class="header" href="#higher-ranks">Higher ranks</a></h3>
<p>If <code><span class='Value'>ğ•¨</span></code> and <code><span class='Value'>ğ•©</span></code> are two-dimensional then Find does a two-dimensional search. The cells used are also found in <code><span class='Value'>ğ•¨</span><span class='Function'>â‰¢</span><span class='Modifier2'>âŠ¸</span><span class='Function'>â†•</span><span class='Value'>ğ•©</span></code>. For example, the bottom-right corner of <code><span class='Value'>ğ•©</span></code> below matches <code><span class='Value'>ğ•¨</span></code>, so there's a 1 in the bottom-right corner of the result.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oqiIGEg4oaQIDcgKDR84ouGy5wp4oyc4peL4oaVIDkgICAjIEFycmF5IHdpdGggcGF0dGVybnMKCigw4oC/M+KAvzDiiY0w4oC/MeKAvzApIOKNtyBh">â†—ï¸</a><pre>    <span class='Function'>âŠ¢</span> <span class='Value'>a</span> <span class='Gets'>â†</span> <span class='Number'>7</span> <span class='Paren'>(</span><span class='Number'>4</span><span class='Function'>|â‹†</span><span class='Modifier'>Ëœ</span><span class='Paren'>)</span><span class='Modifier'>âŒœ</span><span class='Modifier2'>â—‹</span><span class='Function'>â†•</span> <span class='Number'>9</span>   <span class='Comment'># Array with patterns
</span>â”Œâ”€                   
â•µ 1 1 1 1 1 1 1 1 1  
  0 1 2 3 0 1 2 3 0  
  0 1 0 1 0 1 0 1 0  
  0 1 0 3 0 1 0 3 0  
  0 1 0 1 0 1 0 1 0  
  0 1 0 3 0 1 0 3 0  
  0 1 0 1 0 1 0 1 0  
                    â”˜

    <span class='Paren'>(</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Function'>â‰</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Paren'>)</span> <span class='Function'>â·</span> <span class='Value'>a</span>
â”Œâ”€               
â•µ 0 0 0 0 0 0 0  
  0 0 0 0 0 0 0  
  0 0 0 0 0 0 0  
  0 0 1 0 0 0 1  
  0 0 0 0 0 0 0  
  0 0 1 0 0 0 1  
                â”˜
</pre>
<p>It's also allowed for <code><span class='Value'>ğ•¨</span></code> to have a smaller rank than <code><span class='Value'>ğ•©</span></code>; in this case leading axes of <code><span class='Value'>ğ•©</span></code> are mapped over so that axes of <code><span class='Value'>ğ•¨</span></code> correspond to trailing axes of <code><span class='Value'>ğ•©</span></code>. This is a minor violation of the <a href="leading.html">leading axis</a> principle, which would match axes of <code><span class='Value'>ğ•¨</span></code> to leading axes of <code><span class='Value'>ğ•©</span></code> in order to make a function that's useful with the Rank operator, but such a function would be quite strange and hardly ever useful.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MOKAvzHigL8w4oC/MSDijbcgYQ==">â†—ï¸</a><pre>    <span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span> <span class='Function'>â·</span> <span class='Value'>a</span>
â”Œâ”€             
â•µ 0 0 0 0 0 0  
  0 0 0 0 0 0  
  1 0 1 0 1 0  
  0 0 0 0 0 0  
  1 0 1 0 1 0  
  0 0 0 0 0 0  
  1 0 1 0 1 0  
              â”˜
</pre>
