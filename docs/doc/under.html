<head>
  <meta charset="utf-8">
  <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="../style.css" rel="stylesheet"/>
  <title>BQN: Under</title>
</head>
<div class="nav">(<a href="https://github.com/mlochbaum/BQN">github</a>) / <a href="../index.html">BQN</a> / <a href="index.html">doc</a></div>
<h1 id="under"><a class="header" href="#under">Under</a></h1>
<svg viewBox='-263.8 -110 527.6 250'>
  <g font-size='20px' text-anchor='middle' fill='currentColor'>
    <rect class='code' stroke-width='1' rx='12' x='-188' y='-100' width='376' height='200'/>
    <text dy='0.31em' x='0' y='120'>Under</text>
    <g stroke-width='2.6'><path class='purple' style='fill:none' d='M-48.88 -50l97.76 0m-15 -8l15 8l-15 8'/></g>
    <g stroke-width='2'><path class='yellow' style='fill:none' d='M-48.88 50l97.76 0m-15 -8l15 8l-15 8M-94 -33l0 66m8 -15l-8 15l-8 -15M94 -33l0 66m8 -15l-8 15l-8 -15'/></g>
    <g font-size='18px' font-family='BQN,monospace'>
      <g font-size='20px'><text dy='0.31em' x='0' y='-72'><tspan class='Function'>ğ”½</tspan><tspan class='Modifier2'>âŒ¾</tspan><tspan class='Function'>ğ”¾</tspan></text></g>
      <text dy='0.31em' x='0' y='72'><tspan class='Function'>ğ”½</tspan></text>
      <text dy='0.31em' x='-112.8' y='0'><tspan class='Function'>ğ”¾</tspan></text>
      <text dy='0.31em' x='112.8' y='0'><tspan class='Function'>ğ”¾</tspan></text>
      <g class='string'>
        <text dy='0.31em' x='-94' y='-50'>"udner"</text>
        <text dy='0.31em' x='-94' y='50'> "dn"  </text>
        <text dy='0.31em' x='94' y='-50'>"uNDer"</text>
        <text dy='0.31em' x='94' y='50'> "ND"  </text>
      </g>
    </g>
  </g>
</svg>

<p>The Under 2-modifier expresses the idea of modifying <em>part</em> of an array, or applying a function in a different domain, such as working in logarithmic space. It works with a transformation <code><span class='Function'>ğ”¾</span></code> that applies to the original argument <code><span class='Value'>ğ•©</span></code>, and a function <code><span class='Function'>ğ”½</span></code> that applies to the result of <code><span class='Function'>ğ”¾</span></code> (and if <code><span class='Value'>ğ•¨</span></code> is given, <code><span class='Function'>ğ”¾</span><span class='Value'>ğ•¨</span></code> is used as the left argument to <code><span class='Function'>ğ”½</span></code>). Under does the &quot;same thing&quot; as <code><span class='Function'>ğ”½</span></code>, but to the original argument, by applying <code><span class='Function'>ğ”¾</span></code>, then <code><span class='Function'>ğ”½</span></code>, then undoing <code><span class='Function'>ğ”¾</span></code> somehow.</p>
<p>It's not always possible to undo <code><span class='Function'>ğ”¾</span></code>, so only some right operands will work. BQN supports two cases. <strong>Computational</strong> Under tries the <a href="undo.html">Undo</a> modifier, so that <code><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span></code> is <code><span class='Function'>ğ”¾</span><span class='Modifier'>â¼</span><span class='Modifier2'>âˆ˜</span><span class='Function'>ğ”½</span><span class='Modifier2'>â—‹</span><span class='Function'>ğ”¾</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MyAr4oy+KMOXy5wpIDQgICMgU3F1YXJlIHJvb3Qgb2Ygc3VtIG9mIHNxdWFyZXM=">â†—ï¸</a><pre>    <span class='Number'>3</span> <span class='Function'>+</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Function'>Ã—</span><span class='Modifier'>Ëœ</span><span class='Paren'>)</span> <span class='Number'>4</span>  <span class='Comment'># Square root of sum of squares
</span>5
</pre>
<p><strong>Structural</strong> Under is used when <code><span class='Function'>ğ”¾</span></code> selects part of the array. BQN tracks what was selected and puts the results from <code><span class='Function'>ğ”½</span></code> back where they came from.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=K2DijL7iiL4g4p+oM+KAvzHigL8wLCAy4oC/NSwgMOKAvzDigL824p+pICAjIFByZWZpeCBzdW0sIGtlZXBpbmcgc3RydWN0dXJl">â†—ï¸</a><pre>    <span class='Function'>+</span><span class='Modifier'>`</span><span class='Modifier2'>âŒ¾</span><span class='Function'>âˆ¾</span> <span class='Bracket'>âŸ¨</span><span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Separator'>,</span> <span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>5</span><span class='Separator'>,</span> <span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>6</span><span class='Bracket'>âŸ©</span>  <span class='Comment'># Prefix sum, keeping structure
</span>âŸ¨ âŸ¨ 3 4 4 âŸ© âŸ¨ 6 11 âŸ© âŸ¨ 11 11 17 âŸ© âŸ©
</pre>
<p>Structural Under is an essential part of BQN because of how it can &quot;change&quot; an immutable <a href="array.html">array</a>, and it supports more functions and is always well defined. Computational Under's nice, but not so important. The reason they can both be supported as a single primitive is that they follow this unifying principle:</p>
<pre><span class='Paren'>(</span><span class='Function'>ğ”¾</span> <span class='Value'>ğ•¨</span><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span><span class='Value'>ğ•©</span><span class='Paren'>)</span> <span class='Function'>â‰¡</span> <span class='Value'>ğ•¨</span><span class='Function'>ğ”½</span><span class='Modifier2'>â—‹</span><span class='Function'>ğ”¾</span><span class='Value'>ğ•©</span>
</pre>
<p>That is, when you apply <code><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span></code> <em>before</em> applying <code><span class='Function'>ğ”¾</span></code>, you get the value that comes from applying <code><span class='Function'>ğ”½</span></code> <em>after</em> <code><span class='Function'>ğ”¾</span></code>. The definition of computational under comes from applying <code><span class='Function'>ğ”¾</span><span class='Modifier'>â¼</span></code> to both sides and cancelling <code><span class='Function'>ğ”¾</span><span class='Modifier'>â¼</span><span class='Function'>ğ”¾</span></code>, which solves the constraint but doesn't have to be a unique solution. For structural Under, the reason this works is that <code><span class='Function'>ğ”¾</span></code> selects out the parts of <code><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span></code> that were placed back in by Under. Other parts are defined to be the same as it was in <code><span class='Value'>ğ•©</span></code>, so the result is fully specified.</p>
<h2 id="structural-under"><a class="header" href="#structural-under">Structural Under</a></h2>
<p>A <em>structural function</em> is one that moves elements around without performing computation on them. It's okay if it performs computation, but it has to be based on the structure of its argumentâ€”shape, and element structureâ€”and not on the values of atoms in it. As an example, the function <code><span class='Function'>âŠ</span><span class='Modifier'>Ë˜</span></code> selects the first column of an array.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oqiIGEg4oaQIDTigL8z4qWK4oaVMTIKCjHiirjijL3ijL4o4oqPy5gpIGE=">â†—ï¸</a><pre>    <span class='Function'>âŠ¢</span> <span class='Value'>a</span> <span class='Gets'>â†</span> <span class='Number'>4</span><span class='Ligature'>â€¿</span><span class='Number'>3</span><span class='Function'>â¥Šâ†•</span><span class='Number'>12</span>
â”Œâ”€         
â•µ 0  1  2  
  3  4  5  
  6  7  8  
  9 10 11  
          â”˜

    <span class='Number'>1</span><span class='Modifier2'>âŠ¸</span><span class='Function'>âŒ½</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Function'>âŠ</span><span class='Modifier'>Ë˜</span><span class='Paren'>)</span> <span class='Value'>a</span>
â”Œâ”€         
â•µ 3  1  2  
  6  4  5  
  9  7  8  
  0 10 11  
          â”˜
</pre>
<p>When used with Under, the function <code><span class='Number'>1</span><span class='Modifier2'>âŠ¸</span><span class='Function'>âŒ½</span></code> applies to the first column, <a href="reverse.html#rotate">rotating</a> it. The result of <code><span class='Function'>ğ”½</span></code> needs to be compatible with the selection function, so Rotate works but trying to drop an element is no good:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oqiIGEg4oaQIDTigL8z4qWK4oaVMTIKMeKKuOKGk+KMvijiio/LmCkgYQ==">â†—ï¸</a><pre>    <span class='Number'>1</span><span class='Modifier2'>âŠ¸</span><span class='Function'>â†“</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Function'>âŠ</span><span class='Modifier'>Ë˜</span><span class='Paren'>)</span> <span class='Value'>a</span>
<span class='Error'>Error: â¼: Inverse not found</span>
</pre>
<p>BQN can detect lots of structural functions when written <a href="tacit.html">tacitly</a>; see the list of recognized forms <a href="../spec/inferred.html#required-structural-inverses">in the spec</a>. You can also include computations on the shape. For example, here's a function to reverse the first half of a list.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oy94oy+KOKKouKGkcuc4omgw7cyy5kpICJhYmNkZWYi">â†—ï¸</a><pre>    <span class='Function'>âŒ½</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Function'>âŠ¢â†‘</span><span class='Modifier'>Ëœ</span><span class='Function'>â‰ Ã·</span><span class='Number'>2</span><span class='Modifier'>Ë™</span><span class='Paren'>)</span> <span class='String'>&quot;abcdef&quot;</span>
"cbadef"
</pre>
<p>But you can't use a computation that uses array values, such as <code><span class='Number'>10</span><span class='Modifier2'>âŠ¸</span><span class='Function'>+</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>((</span><span class='Function'>&lt;</span><span class='Modifier2'>âŸœ</span><span class='Number'>5</span><span class='Paren'>)</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span><span class='Paren'>)</span></code> to add 10 to each element below 5. This is because Under can change the array values, so that the function <code><span class='Function'>ğ”¾</span></code> doesn't select the same elements before and after applying it (contrarily, Under can't change array structure, or at least not the parts that matter to <code><span class='Function'>ğ”¾</span></code>). To use a dynamic selection function, compute the mask or indices based on a copy of the argument and use those as part of <code><span class='Function'>ğ”¾</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=ezEw4oq4K+KMvigo8J2VqTw1KeKKuC8p8J2VqX0gM+KAvzjigL8y4oC/MuKAvzYKCig84p+cNSniirgvIDPigL844oC/MuKAvzLigL82CgooPOKfnDUp4oq4LyB7MTDiirgr4oy+KCjwnZWpPDUp4oq4LynwnZWpfSAz4oC/OOKAvzLigL8y4oC/Ng==">â†—ï¸</a><pre>    <span class='Brace'>{</span><span class='Number'>10</span><span class='Modifier2'>âŠ¸</span><span class='Function'>+</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>((</span><span class='Value'>ğ•©</span><span class='Function'>&lt;</span><span class='Number'>5</span><span class='Paren'>)</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span><span class='Paren'>)</span><span class='Value'>ğ•©</span><span class='Brace'>}</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>8</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>6</span>
âŸ¨ 13 8 12 12 6 âŸ©

    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier2'>âŸœ</span><span class='Number'>5</span><span class='Paren'>)</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>8</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>6</span>
âŸ¨ 3 2 2 âŸ©

    <span class='Paren'>(</span><span class='Function'>&lt;</span><span class='Modifier2'>âŸœ</span><span class='Number'>5</span><span class='Paren'>)</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span> <span class='Brace'>{</span><span class='Number'>10</span><span class='Modifier2'>âŠ¸</span><span class='Function'>+</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>((</span><span class='Value'>ğ•©</span><span class='Function'>&lt;</span><span class='Number'>5</span><span class='Paren'>)</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span><span class='Paren'>)</span><span class='Value'>ğ•©</span><span class='Brace'>}</span> <span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>8</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>6</span>
âŸ¨âŸ©
</pre>
<p>Under is useful with <a href="scan.html">scans</a>, as discussed in a section on <a href="scan.html#reverse-scan">reverse scan</a>. In this case, <code><span class='Function'>âŒ½</span></code> is exactly invertible, so <code><span class='Modifier2'>âŒ¾</span></code> can just as easily be seen as computational Under. When <code><span class='Function'>ğ”¾</span></code> has an exact inverse, there can only be one solution to the constraint on Under, and both forms must be the same.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oinYOKMvuKMvSAx4oC/MOKAvzHigL8w4oC/MeKAvzHigL8x">â†—ï¸</a><pre>    <span class='Function'>âˆ§</span><span class='Modifier'>`</span><span class='Modifier2'>âŒ¾</span><span class='Function'>âŒ½</span> <span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>1</span>
âŸ¨ 0 0 0 0 1 1 1 âŸ©
</pre>
<p>Structural Under is the same concept as a (lawful) <a href="https://ncatlab.org/nlab/show/lens+%28in+computer+science%29">lens</a> in functional programming (see also <a href="https://en.wikipedia.org/wiki/Bidirectional_transformation">bidirectional transformation</a>). Lenses are usually defined as getter/setter pairs, but BQN's restriction to structural functions makes an implicit setter work even for polymorphic array functions.</p>
<h2 id="computational-under"><a class="header" href="#computational-under">Computational Under</a></h2>
<p>Computational Under is based on <a href="undo.html">Undo</a> (<code><span class='Modifier'>â¼</span></code>), and applies whenever structural Under doesn't. It's still limited, because Undo doesn't work on many or even most functions. One common use is with the square function <code><span class='Function'>Ã—</span><span class='Modifier'>Ëœ</span></code>, for computations such as finding the magnitude of a vector, or a <a href="https://en.wikipedia.org/wiki/Root_mean_square">root-mean-square</a> average like the one below.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=KCvCtMO34omgKeKMvijDl8ucKSAy4oC/M+KAvzTigL81">â†—ï¸</a><pre>    <span class='Paren'>(</span><span class='Function'>+</span><span class='Modifier'>Â´</span><span class='Function'>Ã·â‰ </span><span class='Paren'>)</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Function'>Ã—</span><span class='Modifier'>Ëœ</span><span class='Paren'>)</span> <span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>4</span><span class='Ligature'>â€¿</span><span class='Number'>5</span>
3.6742346141747673
</pre>
<p>This average is the square root of the average of the squares of the arguments, and <code><span class='Modifier2'>âŒ¾</span></code> lets us combine the two square-y steps. Here there are two possible solutions because <code><span class='Number'>Â¯3.67</span><span class='Value'>â€¦</span></code> has the same square as the positive result; BQN of course uses the principal root. Similarly, <code><span class='Modifier2'>âŒ¾</span><span class='Function'>Ã·</span></code> can be used for a harmonic sum or mean (you might notice that computational Under is a lot more mathy than the structural one).</p>
<p>Under is the idiomatic way to do a round-to-nearest function:</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oyK4oy+KDEw4oq4w5cpIDMuNTI04oC/Ni43OTnigL8yLjAzMQ==">â†—ï¸</a><pre>    <span class='Function'>âŒŠ</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Number'>10</span><span class='Modifier2'>âŠ¸</span><span class='Function'>Ã—</span><span class='Paren'>)</span> <span class='Number'>3.524</span><span class='Ligature'>â€¿</span><span class='Number'>6.799</span><span class='Ligature'>â€¿</span><span class='Number'>2.031</span>
âŸ¨ 3.5 6.7 2 âŸ©
</pre>
<p>See how it works? <code><span class='Function'>âŒŠ</span></code> rounds down to an integer, but we can get it to round down to a decimal by first multiplying by 10 (so that single decimals become integers), then rounding, then undoing that multiplication. A related idea is to not just round but produce a range. Suppose I want the arithmetic progression 4, 7, 10, ... &lt;20. If I had the right range <code><span class='Function'>â†•</span><span class='Value'>n</span></code>, then it would be <code><span class='Number'>4</span><span class='Function'>+</span><span class='Number'>3</span><span class='Function'>Ã—â†•</span><span class='Value'>n</span></code>, or <code><span class='Paren'>(</span><span class='Number'>4</span><span class='Function'>+</span><span class='Number'>3</span><span class='Function'>Ã—âŠ¢</span><span class='Paren'>)</span><span class='Function'>â†•</span><span class='Value'>n</span></code>. By using the <em>inverse</em> of this transformation function on the desired endpoint, I can make sure it's applied on the way out, and BQN figures out what to do on the way in as if by magic.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4oaV4oiY4oyI4oy+KCg0KzPDl+KKoinigbwpIDIw">â†—ï¸</a><pre>    <span class='Function'>â†•</span><span class='Modifier2'>âˆ˜</span><span class='Function'>âŒˆ</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>((</span><span class='Number'>4</span><span class='Function'>+</span><span class='Number'>3</span><span class='Function'>Ã—âŠ¢</span><span class='Paren'>)</span><span class='Modifier'>â¼</span><span class='Paren'>)</span> <span class='Number'>20</span>
âŸ¨ 4 7 10 13 16 19 âŸ©
</pre>
<p>Well, really it's some simple algebra, but if it wants to wear a pointy hat and wave a wand around I won't judge.</p>
<h2 id="left-argument"><a class="header" href="#left-argument">Left argument</a></h2>
<p>When called dyadically, Under applies <code><span class='Function'>ğ”½</span></code> dyadically, like <a href="compose.html#over">Over</a>. This doesn't affect the undoing part of Under, which still tries to put the result of <code><span class='Function'>ğ”½</span></code> back into <code><span class='Value'>ğ•©</span></code> for structural Under or invert <code><span class='Function'>ğ”¾</span></code> for computational. In fact, <code><span class='Value'>ğ•¨</span> <span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span> <span class='Value'>ğ•©</span></code> is equivalent to <code><span class='Paren'>(</span><span class='Function'>ğ”¾</span><span class='Value'>ğ•¨</span><span class='Paren'>)</span><span class='Modifier'>Ë™</span><span class='Modifier2'>âŠ¸</span><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span> <span class='Value'>ğ•©</span></code> so no exciting language stuff is happening here at all.</p>
<p>But you can still do cool things with it! One pattern is simply to set <code><span class='Function'>ğ”½</span></code> to <code><span class='Function'>âŠ£</span></code>, the <a href="identity.html">identity</a> function that just returns its left argument. Now structural Under will replace everything that <code><span class='Function'>ğ”¾</span></code> selects from <code><span class='Value'>ğ•©</span></code> with the corresponding values in <code><span class='Value'>ğ•¨</span></code>. Here's an example that replaces elements with indices <code><span class='Number'>1</span></code> and <code><span class='Number'>2</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=ImFiY2QiIOKKo+KMvigx4oC/MuKKuOKKjykgIjAxMjMi">â†—ï¸</a><pre>    <span class='String'>&quot;abcd&quot;</span> <span class='Function'>âŠ£</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Modifier2'>âŠ¸</span><span class='Function'>âŠ</span><span class='Paren'>)</span> <span class='String'>&quot;0123&quot;</span>
"0bc3"
</pre>
<p>This method can replace deeper structure too. Below, <code><span class='Function'>ğ”¾</span></code> is <code><span class='Number'>Â¯1</span><span class='Function'>âŠ‘</span><span class='Modifier'>Â¨</span><span class='Number'>2</span><span class='Function'>â†‘âŠ¢</span></code>, selecting the last element of each of the first two elements of its argument. The elements that aren't selected don't have to match up.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4p+oImFiIiwgImNkZSIsICJmZyLin6kg4oqj4oy+KMKvMeKKkcKoMuKGkeKKoikg4oaVwqgz4oC/MuKAvzHigL8x">â†—ï¸</a><pre>    <span class='Bracket'>âŸ¨</span><span class='String'>&quot;ab&quot;</span><span class='Separator'>,</span> <span class='String'>&quot;cde&quot;</span><span class='Separator'>,</span> <span class='String'>&quot;fg&quot;</span><span class='Bracket'>âŸ©</span> <span class='Function'>âŠ£</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Number'>Â¯1</span><span class='Function'>âŠ‘</span><span class='Modifier'>Â¨</span><span class='Number'>2</span><span class='Function'>â†‘âŠ¢</span><span class='Paren'>)</span> <span class='Function'>â†•</span><span class='Modifier'>Â¨</span><span class='Number'>3</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>1</span>
âŸ¨ âŸ¨ 0 1 'b' âŸ© âŸ¨ 0 'e' âŸ© âŸ¨ 0 âŸ© âŸ¨ 0 âŸ© âŸ©
</pre>
<p>In fact, the elements that <em>are</em> selected don't really have to match up before being selected. So here's an example with <a href="join.html">Join</a> where the same pattern is used to &quot;re-flow&quot; <code><span class='Value'>ğ•¨</span></code> into the structure of <code><span class='Value'>ğ•©</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=4p+oImFiIiwgImNkZSIsICJmZyLin6kg4oqj4oy+4oi+IOKfqCItLS0iLCAiLS0tLSLin6k=">â†—ï¸</a><pre>    <span class='Bracket'>âŸ¨</span><span class='String'>&quot;ab&quot;</span><span class='Separator'>,</span> <span class='String'>&quot;cde&quot;</span><span class='Separator'>,</span> <span class='String'>&quot;fg&quot;</span><span class='Bracket'>âŸ©</span> <span class='Function'>âŠ£</span><span class='Modifier2'>âŒ¾</span><span class='Function'>âˆ¾</span> <span class='Bracket'>âŸ¨</span><span class='String'>&quot;---&quot;</span><span class='Separator'>,</span> <span class='String'>&quot;----&quot;</span><span class='Bracket'>âŸ©</span>
âŸ¨ "abc" "defg" âŸ©
</pre>
<h3 id="and-getting-it-not-to-do-that"><a class="header" href="#and-getting-it-not-to-do-that">And getting it not to do that</a></h3>
<p>The Over-based action on <code><span class='Value'>ğ•¨</span></code> shows up more than you might think, but sometimes you just want to pass a left argument to <code><span class='Function'>ğ”½</span></code> without <code><span class='Function'>ğ”¾</span></code> getting involved. In this case you have to <a href="hook.html#bind">bind</a> it in: call <code><span class='Value'>ğ•¨</span><span class='Modifier2'>âŠ¸</span><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span> <span class='Value'>ğ•©</span></code>.</p>
<a class="replLink" title="Open in the REPL" target="_blank" href="https://mlochbaum.github.io/BQN/try.html#code=MeKAvzLigL8z4oq4K+KMvigx4oC/MeKAvzDigL8x4oq4LykgMTDigL8yMOKAvzMw4oC/NDA=">â†—ï¸</a><pre>    <span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>2</span><span class='Ligature'>â€¿</span><span class='Number'>3</span><span class='Modifier2'>âŠ¸</span><span class='Function'>+</span><span class='Modifier2'>âŒ¾</span><span class='Paren'>(</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Ligature'>â€¿</span><span class='Number'>0</span><span class='Ligature'>â€¿</span><span class='Number'>1</span><span class='Modifier2'>âŠ¸</span><span class='Function'>/</span><span class='Paren'>)</span> <span class='Number'>10</span><span class='Ligature'>â€¿</span><span class='Number'>20</span><span class='Ligature'>â€¿</span><span class='Number'>30</span><span class='Ligature'>â€¿</span><span class='Number'>40</span>
âŸ¨ 11 22 30 43 âŸ©
</pre>
<p>This <a href="../problems.html#underbind-combination-is-awkward">gets bad</a> when you want <code><span class='Value'>ğ•¨</span></code> to be an argument. In the worst case you might need to write out an operator <code><span class='Brace'>{</span><span class='Value'>ğ•¨</span><span class='Modifier2'>âŠ¸</span><span class='Function'>ğ”½</span><span class='Modifier2'>âŒ¾</span><span class='Function'>ğ”¾</span><span class='Value'>ğ•©</span><span class='Brace'>}</span></code>.</p>
