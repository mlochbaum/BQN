# BQN hosted in dzaima/BQN
# Result is a function that executes BQN code.

âŸ¨DRun,DCompileâŸ© â† â€¢Import "dc.bqn"
âŸ¨ref,glyphsâŸ© â† â€¢Import "src/pr.bqn"

provide â† âŸ¨
  â€¢Type           # Type
  â€¢FillFn         # Fill
  â‹†â¼              # Log
  {(ğ•¨âŒˆâ‰ )âŠ¸â†‘â‰ Â¨âŠ”ğ•©}   # GroupLen
  âˆ¾âŠ”âˆ˜âŠ¢            # GroupOrd
  !,+,-,Ã—,Ã·,â‹†,âŒŠ,=,â‰¤,â‰¢,â¥Š,âŠ‘,â†•,âŒœ,`,â€¢_fillBy_,âŠ˜
âŸ©
rtâ€¿SetPrims â† â€¢COMP provideâŠ¸(âŠ£Â»Â«)âŒ¾(1âŠ¸âŠ‘) DCompile ref
PrimInd â† rtâŠ¸âŠâŒ¾<
Decompose â† ((â‰ glyphs)>PrimInd)â—¶âŸ¨â€¢Decompose,0âŠ¸â‰âŸ©
SetPrims âŸ¨ Decompose, PrimInd âŸ©

sys â† {ğ•©âŠËœğ•¨âŠ¸âŠ}Ëâ‰>âŸ¨
  "bqn"â€¿{BQNğ•©}
  "type"â€¿â€¢Type
  "glyph"â€¿(glyphsâŠ‘ËœPrimInd)
  "decompose"â€¿Decompose
âŸ©
BQN â† âŸ¨rt,SysâŸ©âŠ¸DRun
